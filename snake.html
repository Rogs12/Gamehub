<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Neon Snake</title>
<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: "Orbitron", sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  overflow: hidden;
}
h1 {
  text-align: center;
  color: #0f0;
  text-shadow: 0 0 10px #0f0;
}
#score {
  margin: 10px 0;
  font-size: 20px;
  text-shadow: 0 0 5px #0f0;
}
canvas {
  border: 2px solid rgba(0,255,0,0.5);
  border-radius: 12px;
  background: rgba(0,255,0,0.05);
  box-shadow: 0 0 20px rgba(0,255,0,0.3);
}
#touchControls {
  display: none;
  gap: 10px;
  justify-content: center;
  margin-top: 15px;
  flex-wrap: wrap;
}
.touchBtn {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  border: 2px solid rgba(0,255,0,0.6);
  background: rgba(0,255,0,0.05);
  color: #0f0;
  font-family: "Orbitron", sans-serif;
  font-size: 18px;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 0 10px rgba(0,255,0,0.4);
  user-select: none;
  touch-action: manipulation;
}
#startBtn {
  margin-top: 15px;
  padding: 8px 20px;
  font-family: "Orbitron", sans-serif;
  font-size: 18px;
  border: 2px solid rgba(0,255,0,0.6);
  background: transparent;
  color: #0f0;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,255,0,0.4);
  transition: 0.2s;
}
#startBtn:hover {
  box-shadow: 0 0 20px #0f0;
  border-color: #0f0;
}
#gameOverScreen {
  position: absolute;
  top: 0;
  left:0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.85);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: #0f0;
  font-family: "Orbitron", sans-serif;
  text-align: center;
  font-size: 24px;
  text-shadow: 0 0 10px #0f0;
  display: none;
}
#gameOverScreen button {
  margin-top: 15px;
  padding: 8px 20px;
  font-family: "Orbitron", sans-serif;
  font-size: 18px;
  border: 2px solid rgba(0,255,0,0.6);
  background: transparent;
  color: #0f0;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,255,0,0.4);
}
#gameOverScreen button:hover {
  box-shadow: 0 0 20px #0f0;
  border-color: #0f0;
}
@media(max-width:768px){
  #touchControls { display: flex; }
}
</style>
</head>
<body>

<h1>Neon Snake</h1>
<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="400" height="400"></canvas>

<div id="touchControls">
  <div class="touchBtn" id="upBtn">▲</div>
  <div class="touchBtn" id="leftBtn">◀</div>
  <div class="touchBtn" id="downBtn">▼</div>
  <div class="touchBtn" id="rightBtn">▶</div>
</div>

<button id="startBtn">START</button>

<div id="gameOverScreen">
  <div id="gameOverText"></div>
  <button id="restartBtn">Restart</button>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreDisplay = document.getElementById("score");

const upBtn = document.getElementById("upBtn");
const downBtn = document.getElementById("downBtn");
const leftBtn = document.getElementById("leftBtn");
const rightBtn = document.getElementById("rightBtn");
const startBtn = document.getElementById("startBtn");
const gameOverScreen = document.getElementById("gameOverScreen");
const gameOverText = document.getElementById("gameOverText");
const restartBtn = document.getElementById("restartBtn");

const blockSize = 20;
const rows = canvas.height / blockSize;
const cols = canvas.width / blockSize;

let snake, dir, food, score, moveInterval, gameOver, speed;

function spawnFood() {
  food = { x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows) };
  while(snake.some(s => s.x===food.x && s.y===food.y)){
    food.x = Math.floor(Math.random() * cols);
    food.y = Math.floor(Math.random() * rows);
  }
}

function drawBlock(x,y,color){
  ctx.fillStyle=color;
  ctx.shadowColor=color;
  ctx.shadowBlur=8;
  ctx.fillRect(x*blockSize,y*blockSize,blockSize-1,blockSize-1);
  ctx.shadowBlur=0;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBlock(food.x,food.y,"#f00"); // red food
  snake.forEach((s,i)=>drawBlock(s.x,s.y,i===0?"#0f0":"#0f0"));
}

function moveSnake(){
  const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
  if(head.x<0 || head.x>=cols || head.y<0 || head.y>=rows || snake.some(s=>s.x===head.x && s.y===head.y)){
    clearInterval(moveInterval);
    gameOver = true;
    gameOverText.innerHTML = "GAME OVER<br>Score: " + score;
    gameOverScreen.style.display = "flex";
    return;
  }
  snake.unshift(head);
  if(head.x === food.x && head.y === food.y){
    score++;
    scoreDisplay.textContent = "Score: "+score;
    spawnFood();
    // increase speed progressively
    clearInterval(moveInterval);
    speed = Math.max(50, 150 - score*5);
    moveInterval = setInterval(moveSnake, speed);
  } else { snake.pop(); }
  draw();
}

function startGame(){
  snake = [{x:5,y:5}];
  dir = {x:1,y:0}; // start moving right
  score = 0;
  speed = 150;
  gameOver = false;
  scoreDisplay.textContent = "Score: 0";
  spawnFood();
  draw();
  moveInterval = setInterval(moveSnake, speed);
  startBtn.style.display = "none";
}

function restartGame(){
  gameOverScreen.style.display = "none";
  startGame();
}

// WASD keyboard controls - prevent backward
document.addEventListener("keydown", e=>{
  if(!gameOver){
    if((e.key==="w" || e.key==="W") && dir.y!==1) dir={x:0,y:-1};
    if((e.key==="s" || e.key==="S") && dir.y!==-1) dir={x:0,y:1};
    if((e.key==="a" || e.key==="A") && dir.x!==1) dir={x:-1,y:0};
    if((e.key==="d" || e.key==="D") && dir.x!==-1) dir={x:1,y:0};
  }
});

// Touch controls with arrows - prevent backward
function repeatTouch(btn, action){
  let interval;
  btn.addEventListener("touchstart",e=>{ e.preventDefault(); action(); interval=setInterval(action,150); });
  btn.addEventListener("touchend",e=>clearInterval(interval));
  btn.addEventListener("touchcancel",e=>clearInterval(interval));
}
repeatTouch(upBtn,()=>{ if(dir.y!==1) dir={x:0,y:-1}; });
repeatTouch(downBtn,()=>{ if(dir.y!==-1) dir={x:0,y:1}; });
repeatTouch(leftBtn,()=>{ if(dir.x!==1) dir={x:-1,y:0}; });
repeatTouch(rightBtn,()=>{ if(dir.x!==-1) dir={x:1,y:0}; });

startBtn.addEventListener("click", startGame);
restartBtn.addEventListener("click", restartGame);

</script>
</body>
</html>
